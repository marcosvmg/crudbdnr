{% extends 'base.html' %}

{% block content %}
    <section class="form-section">
        <h2>Adicionar Nova Tarefa</h2>
        <form action="{{ url_for('adicionar') }}" method="post">
            <div class="form-group">
                <label for="titulo">Título:</label>
                <input type="text" id="titulo" name="titulo" required>
            </div>
            <div class="form-group">
                <label for="descricao">Descrição:</label>
                <textarea id="descricao" name="descricao" rows="3" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Adicionar Tarefa</button>
        </form>
    </section>

    <section class="task-list-section">
        <h2>Minhas Tarefas</h2>
        {% if tarefas %}
            <div class="task-list">
                {% for tarefa in tarefas %}
                    <div class="task-card">
                        <div class="task-header">
                            <h3>{{ tarefa.titulo }} (ID: {{ tarefa.id }})</h3>
                            <span class="status status-{{ tarefa.status.lower().replace(' ', '-') }}">{{ tarefa.status }}</span>
                        </div>
                        <p class="task-description">{{ tarefa.descricao }}</p>
                        <small class="task-date">Criado em: {{ tarefa.data_criacao }}</small>
                        <div class="task-actions">
                            <a href="{{ url_for('editar', id_tarefa=tarefa.id) }}" class="btn btn-secondary">Editar</a>
                            <form action="{{ url_for('deletar', id_tarefa=tarefa.id) }}" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja excluir esta tarefa?');">Excluir</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>Nenhuma tarefa encontrada. Adicione uma nova tarefa acima!</p>
        {% endif %}
    </section>
{% endblock %}